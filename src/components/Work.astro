---
export interface Props {
	name: string;
	works: Array<{
		title: string;
		description: string;
		imageName: string;
		skills: Array<string>;
	}>;
}

const { name, works } = Astro.props;
---

<div class="py-16">
	<header>
		<h2 class="text-center text-2xl font-bold">事例</h2>
	</header>

	{
		works.map((work) => (
			<div class="container sm:flex pb-16">
				<div class="sm:w-2/3 sm:pr-6">
					<header class="work-title mb-4">
						<h3 class="font-bold text-xl">{work.title}</h3>
					</header>

					<section class="description mb-4">
						<p>{work.description}</p>
					</section>

					<section class="mb-4">
						<p class="font-bold">{work.skills.length !== 0 ? '関連技術' : ''}</p>
						<p>{work.skills.join("、")}</p>
					</section>
				</div>

				<div class="sm:w-1/3 sm:pl-6">
					<section>
						<img src={`/images/${name}/${work.imageName}`} alt="" />
					</section>
				</div>
			</div>
		))
	}
</div>

<script>
	const descElements = document.querySelectorAll(".description");
	for (const desc of descElements) {
		const descText: string = desc.textContent ?? "";
		const newDescText = descText.trim().replace(/\n/g, "<br />");
		desc.innerHTML = newDescText;
	}
</script>
